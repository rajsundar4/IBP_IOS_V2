<!doctype html>
<html><head>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <meta charset="utf-8">
            <link rel="stylesheet" type="text/css" href="style.css">
                <script src="StackBarChart.js"></script>
                <script src="d3.v3.min.js"></script>
                
                
                
</head><body>
    <div class="" id="chart">
    </div>
    
    <script type="text/javascript">
        /* Vertical Cluster*/
        var data = [{
                    PCAOPREV: 10785810,
                    PERIODID3: "Sep-16",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 20960830,
                    PERIODID3: "Sep-16",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 0,
                    PERIODID3: "Sep-16",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 8875630,
                    PERIODID3: "Oct-16",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 16735190,
                    PERIODID3: "Oct-16",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 0,
                    PERIODID3: "Oct-16",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 8629420,
                    PERIODID3: "Nov-16",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 16296900,
                    PERIODID3: "Nov-16",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 0,
                    PERIODID3: "Nov-16",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 10972710,
                    PERIODID3: "Dec-16",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 19755240,
                    PERIODID3: "Dec-16",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 0,
                    PERIODID3: "Dec-16",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 8641460,
                    PERIODID3: "Jan-17",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 15581290,
                    PERIODID3: "Jan-17",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 1479020,
                    PERIODID3: "Jan-17",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 8442690,
                    PERIODID3: "Feb-17",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 15984500,
                    PERIODID3: "Feb-17",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 9290880,
                    PERIODID3: "Feb-17",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 11267040,
                    PERIODID3: "Mar-17",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 20708260,
                    PERIODID3: "Mar-17",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 23152950,
                    PERIODID3: "Mar-17",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 8756770,
                    PERIODID3: "Apr-17",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 16272580,
                    PERIODID3: "Apr-17",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 24680460,
                    PERIODID3: "Apr-17",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 8815800,
                    PERIODID3: "May-17",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 16940660,
                    PERIODID3: "May-17",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 24712630,
                    PERIODID3: "May-17",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 10959370,
                    PERIODID3: "Jun-17",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 21664300,
                    PERIODID3: "Jun-17",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 30148240,
                    PERIODID3: "Jun-17",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 8883980,
                    PERIODID3: "Jul-17",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 17630540,
                    PERIODID3: "Jul-17",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 25503550,
                    PERIODID3: "Jul-17",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 11053630,
                    PERIODID3: "Aug-17",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 21431650,
                    PERIODID3: "Aug-17",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 30619350,
                    PERIODID3: "Aug-17",
                    PRDFAMILY: "Family 300-Home Theater",
                    }, {
                    PCAOPREV: 8491580,
                    PERIODID3: "Sep-17",
                    PRDFAMILY: "Family 100-Headphones",
                    }, {
                    PCAOPREV: 16787010,
                    PERIODID3: "Sep-17",
                    PRDFAMILY: "Family 200-Music Docks",
                    }, {
                    PCAOPREV: 25141160,
                    PERIODID3: "Sep-17",
                    PRDFAMILY: "Family 300-Home Theater",
                    }]
                    
                    var presets = {
                         width : "243.5",
                         measures: [{
                                    name: 'AOP Revenue',
                                    value: "PCAOPREV"
                                    }, ],
                        dimensions: [{
                                     axis: 1,
                                     name: "Monthly",
                                     value: "PERIODID3"
                                     }, {
                                     axis: 2,
                                     name: "Product Family",
                                     value: "PRDFAMILY"
                                     }],
                               
                                                plotArea: {
                                                    colorPalette: ["#21a3f1",
                                                                   "#ff872e",
                                                                   "#79b51a",
                                                                   "#f7e326",
                                                                   "#074389",
                                                                   "#7876e5",
                                                                   "#d5eb7e",
                                                                   "#488bed",
                                                                   "#ffc145",
                                                                   "#8a8175",
                                                                   "#0b7c16"
                                                                   ]
                                                },
                                                dataset: data,
                                              
                                                      height: "185.6",
                                               
                                               
                    }    //function call to render the respective chart
    
        </script>
    <!--    <script>chart(dataset,"chart", AxisLabels);</script>-->
    <!--    <script src="Linechart.js"></script>-->
    
    <!--    <h1>WebViewJavascriptBridge Demo</h1>-->
    <script>
        window.onerror = function(err) {
            log('window.onerror: ' + err)
        }
    
    function setupWebViewJavascriptBridge(callback) {
        if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }
        if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }
        window.WVJBCallbacks = [callback];
        var WVJBIframe = document.createElement('iframe');
        WVJBIframe.style.display = 'none';
        WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
        document.documentElement.appendChild(WVJBIframe);
        setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)
    }
    
    setupWebViewJavascriptBridge(function(bridge) {
                                 var uniqueId = 1
                                 function log(message, data) {
                                 var log = document.getElementById('log')
                                 var el = document.createElement('div')
                                 el.className = 'logLine'
                                 el.innerHTML = uniqueId++ + '. ' + message + ':<br/>' + JSON.stringify(data)
                                 if (log.children.length) { log.insertBefore(el, log.children[0]) }
                                 else { log.appendChild(el) }
                                 }
                                 
                                 bridge.registerHandler('testJavascriptHandler', function(data, responseCallback) {
                                                        log('ObjC called testJavascriptHandler with', data)
                                                        var responseData = { 'Javascript Says':'Right back atcha!' }
                                                        
                                                        presets.dataset = data.dataset
                                                        log('Data after changinfg', presets.dataset)
                                                      
                                                        //var clientHeight = document.getElementById('chart').clientHeight;
                                                        //log('Window width',window.innerWidth,clientHeight);
                                                       // verticalStackBarChart("chart", presets)
                                                        
                                                       verticalStackBarChart("chart", data)
                                                        
                                                        
                                                        //log('Graph is loading from remote');
                                                        //customBarGraph(data);
                                                        
                                                        
                                                        responseCallback(responseData)
                                                        })
                                 
                                 document.body.appendChild(document.createElement('br'))
                                 
                                 var callbackButton = document.getElementById('buttons').appendChild(document.createElement('button'))
                                 callbackButton.innerHTML = 'Fire testObjcCallback'
                                 callbackButton.onclick = function(e) {
                                 e.preventDefault()
                                 log('JS calling handler "testObjcCallback"')
                                 bridge.callHandler('testObjcCallback', {'foo': 'bar'}, function(response) {
                                                    log('JS got response', response)
                                                    })
                                 }
                                 })
                                 
                                 function add() {
                                     return 'Sudhir';
                                 }
    
    function customBarGraph(data) {
        var barDataset =
        [ { x_key: 0, y_value: 5 },{ x_key: 1, y_value: 10 },{ x_key: 2, y_value: 13 },{ x_key: 3, y_value: 19 },{ x_key: 4, y_value: 21 },{ x_key: 5, y_value: 25 },{ x_key: 6, y_value: 22 },{ x_key: 7, y_value: 18 },{ x_key: 8, y_value: 15 },{ x_key: 9, y_value: 13 },{ x_key: 10, y_value: 11 },{ x_key: 11, y_value: 12 },{ x_key: 12, y_value: 15 },{ x_key: 13, y_value: 20 },{ x_key: 14, y_value: 18 },{ x_key: 15, y_value: 17 },{ x_key: 16, y_value: 16 },{ x_key: 17, y_value: 18 },{ x_key: 18, y_value: 23 },{ x_key: 19, y_value: 25 } ];
        barGraph(data,"#bar");//bar graph
        
    }
    
        </script>
    </div> <div id='log'>
    </div>
    
</body></html>


